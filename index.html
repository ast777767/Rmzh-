<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MammoCare ‚Äî –ú–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è –≤ –ê—Å—Ç–∞–Ω–µ | –ê—Å—Ç–∞–Ω–∞–¥–∞“ì—ã –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è</title>
  <meta name="description" content="–ö–∞—Ä—Ç–∞ –∫–ª–∏–Ω–∏–∫ –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –ê—Å—Ç–∞–Ω–µ | Map of mammography clinics in Astana | –ê—Å—Ç–∞–Ω–∞–¥–∞“ì—ã –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è –∫–ª–∏–Ω–∏–∫–∞–ª–∞—Ä—ã–Ω—ã“£ –∫–∞—Ä—Ç–∞—Å—ã" />

  <!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ec4899">
<!-- /PWA -->
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ec4899',
            secondary: '#8b5cf6',
            accent: '#f43f5e',
            soft: '#fff1f2',
            muted: '#64748b'
          },
          fontFamily: { sans: ['Inter', 'system-ui', 'sans-serif'] }
        }
      }
    }
  </script>

  <!-- Leaflet Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- AOS Animations -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    :root { --radius: 12px; --shadow: 0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05) }
    body { font-family: 'Inter', sans-serif; background:#f8fafc }
    .card { border-radius: var(--radius); box-shadow: var(--shadow); background:#fff; border:1px solid #e2e8f0 }
    .nav-item{ transition:.2s } .nav-item:hover{ background:#fdf2f8 } .nav-item.active{ background:#fce7f3; color:#ec4899; font-weight:500 }
    #map{ height:400px; border-radius:var(--radius); z-index:10 }
    .clinic-item{ transition:.2s } .clinic-item:hover{ transform:translateY(-2px); box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04) }
    .article-card{ transition:.2s } .article-card:hover{ transform:translateY(-2px); box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04) }
    .modal-overlay{ background:rgba(0,0,0,.5); z-index:1000 } .modal-content{ max-height:90vh; overflow-y:auto }
    .tab-button{ transition:.2s } .tab-button.active{ color:#ec4899; border-bottom:2px solid #ec4899 }
    .tooltip{ position:relative } .tooltip:hover .tooltip-text{ visibility:visible; opacity:1 }
    .tooltip-text{ visibility:hidden; opacity:0; transition:opacity .3s; position:absolute; z-index:1; bottom:125%; left:50%; transform:translateX(-50%); background:#1e293b; color:#fff; padding:.5rem; border-radius:4px; font-size:.875rem; white-space:nowrap }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- Header -->
  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200">
    <div class="container mx-auto px-4 py-3">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-2">
          <div class="text-2xl text-primary"><i data-feather="heart"></i></div>
          <h1 class="text-xl font-bold text-gray-800">MammoCare</h1>
          <span class="px-2 py-1 text-xs rounded-full bg-primary text-white">
            <span id="current-city" data-i18n="city">Astana</span>
          </span>
        </div>

        <nav class="hidden md:flex space-x-1">
          <a href="#home" class="nav-item px-4 py-2 rounded-lg flex items-center space-x-1" data-view="home">
            <i data-feather="home" class="w-4 h-4"></i>
            <span data-i18n="home">Home</span>
          </a>
          <a href="#clinics" class="nav-item px-4 py-2 rounded-lg flex items-center space-x-1" data-view="clinics">
            <i data-feather="map" class="w-4 h-4"></i>
            <span data-i18n="clinics">Clinics</span>
          </a>
          <a href="#resources" class="nav-item px-4 py-2 rounded-lg flex items-center space-x-1" data-view="resources">
            <i data-feather="book" class="w-4 h-4"></i>
            <span data-i18n="resources">Resources</span>
          </a>
          <a href="#about" class="nav-item px-4 py-2 rounded-lg flex items-center space-x-1" data-view="about">
            <i data-feather="info" class="w-4 h-4"></i>
            <span data-i18n="about">About</span>
          </a>
        </nav>

        <!-- Language Switcher -->
        <div class="relative">
          <button id="language-switcher" class="flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
            <span>üåê</span>
            <span id="current-lang">EN</span>
            <i data-feather="chevron-down" class="w-4 h-4 text-gray-500"></i>
          </button>
          <div id="language-dropdown" class="absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg hidden">
            <button class="w-full text-left px-3 py-2 hover:bg-gray-50" data-lang="en">English</button>
            <button class="w-full text-left px-3 py-2 hover:bg-gray-50" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
            <button class="w-full text-left px-3 py-2 hover:bg-gray-50" data-lang="kz">“ö–∞–∑–∞“õ—à–∞</button>
          </div>
        </div>

        <button id="mobile-menu-button" class="md:hidden text-gray-600">
          <i data-feather="menu" class="w-6 h-6"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="hidden fixed inset-0 z-40 bg-white/95 backdrop-blur-md">
    <div class="container mx-auto px-4 py-8">
      <div class="flex justify-between items-center mb-8">
        <div class="flex items-center space-x-2">
          <div class="text-2xl text-primary"><i data-feather="heart"></i></div>
          <h1 class="text-xl font-bold text-gray-800">MammoCare</h1>
        </div>
        <button id="close-mobile-menu" class="text-gray-600"><i data-feather="x" class="w-6 h-6"></i></button>
      </div>

      <nav class="flex flex-col space-y-4">
        <a href="#home" class="nav-item px-4 py-3 rounded-lg flex items-center space-x-3 text-lg" data-view="home">
          <i data-feather="home" class="w-5 h-5"></i>
          <span data-i18n="home">Home</span>
        </a>
        <a href="#clinics" class="nav-item px-4 py-3 rounded-lg flex items-center space-x-3 text-lg" data-view="clinics">
          <i data-feather="map" class="w-5 h-5"></i>
          <span data-i18n="clinics">Clinics</span>
        </a>
        <a href="#resources" class="nav-item px-4 py-3 rounded-lg flex items-center space-x-3 text-lg" data-view="resources">
          <i data-feather="book" class="w-5 h-5"></i>
          <span data-i18n="resources">Resources</span>
        </a>
        <a href="#about" class="nav-item px-4 py-3 rounded-lg flex items-center space-x-3 text-lg" data-view="about">
          <i data-feather="info" class="w-5 h-5"></i>
          <span data-i18n="about">About</span>
        </a>
      </nav>
    </div>
  </div>

  <!-- Main -->
  <main class="flex-grow container mx-auto px-4 py-6">
    <!-- Home -->
    <section id="view-home" class="space-y-8">
      <div class="card p-6" data-aos="fade-up">
        <div class="flex flex-col md:flex-row items-center gap-6">
          <div class="md:w-1/2">
            <h2 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="hero_title">Breast Cancer Screening in Astana</h2>
            <p class="text-gray-600 mb-4" data-i18n="hero_desc">
              Find mammography clinics near you, learn about self-examination techniques, and access educational resources about breast health.
            </p>
            <div class="flex flex-wrap gap-3 mt-6">
              <a href="#clinics" class="flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-pink-600 transition">
                <i data-feather="map-pin" class="w-4 h-4"></i>
                <span data-i18n="cta_find_clinics">Find Clinics</span>
              </a>
              <a href="#resources" class="flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition">
                <i data-feather="book-open" class="w-4 h-4"></i>
                <span data-i18n="cta_learn_more">Learn More</span>
              </a>
            </div>
          </div>
          <div class="md:w-1/2">
            <img src="http://static.photos/medical/640x360/1" alt="Breast cancer awareness" class="rounded-lg w-full h-auto">
          </div>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="card p-5" data-aos="fade-up" data-aos-delay="100">
          <div class="flex items-center gap-3 mb-3">
            <div class="p-3 rounded-full bg-pink-100 text-primary"><i data-feather="calendar" class="w-5 h-5"></i></div>
            <h3 class="font-semibold text-gray-800" data-i18n="tip1_title">Regular Screening</h3>
          </div>
          <p class="text-sm text-gray-600" data-i18n="tip1_text">Women 40+ should discuss mammography screening with their doctor. Early detection saves lives.</p>
        </div>

        <div class="card p-5" data-aos="fade-up" data-aos-delay="200">
          <div class="flex items-center gap-3 mb-3">
            <div class="p-3 rounded-full bg-purple-100 text-secondary"><i data-feather="clock" class="w-5 h-5"></i></div>
            <h3 class="font-semibold text-gray-800" data-i18n="tip2_title">Monthly Check</h3>
          </div>
          <p class="text-sm text-gray-600" data-i18n="tip2_text">Perform breast self-examination once a month, ideally a few days after your period ends.</p>
        </div>

        <div class="card p-5" data-aos="fade-up" data-aos-delay="300">
          <div class="flex items-center gap-3 mb-3">
            <div class="p-3 rounded-full bg-red-100 text-accent"><i data-feather="activity" class="w-5 h-5"></i></div>
            <h3 class="font-semibold text-gray-800" data-i18n="tip3_title">Healthy Lifestyle</h3>
          </div>
          <p class="text-sm text-gray-600" data-i18n="tip3_text">Maintain a healthy weight, exercise regularly, and limit alcohol consumption to reduce risk.</p>
        </div>

        <div class="card p-5" data-aos="fade-up" data-aos-delay="400">
          <div class="flex items-center gap-3 mb-3">
            <div class="p-3 rounded-full bg-blue-100 text-blue-500"><i data-feather="alert-circle" class="w-5 h-5"></i></div>
            <h3 class="font-semibold text-gray-800" data-i18n="tip4_title">Know the Signs</h3>
          </div>
          <p class="text-sm text-gray-600" data-i18n="tip4_text">Look for lumps, skin changes, nipple discharge, or persistent pain. Report changes to your doctor.</p>
        </div>
      </div>

      <div class="card p-6" data-aos="fade-up">
        <h2 class="text-xl font-bold text-gray-800 mb-4" data-i18n="quick_guide">Quick Self-Check Guide</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="font-semibold text-gray-800 mb-2" data-i18n="visual_inspection">Visual Inspection</h3>
            <ul class="space-y-2 text-gray-600 text-sm">
              <li class="flex items-start gap-2"><i data-feather="check-circle" class="w-4 h-4 text-primary mt-0.5"></i><span data-i18n="vi_1">Stand in front of a mirror with shoulders straight and arms on hips</span></li>
              <li class="flex items-start gap-2"><i data-feather="check-circle" class="w-4 h-4 text-primary mt-0.5"></i><span data-i18n="vi_2">Look for any changes in size, shape, or color</span></li>
              <li class="flex items-start gap-2"><i data-feather="check-circle" class="w-4 h-4 text-primary mt-0.5"></i><span data-i18n="vi_3">Check for dimpling, puckering, or bulging of the skin</span></li>
            </ul>
          </div>
          <div>
            <h3 class="font-semibold text-gray-800 mb-2" data-i18n="physical_exam">Physical Examination</h3>
            <ul class="space-y-2 text-gray-600 text-sm">
              <li class="flex items-start gap-2"><i data-feather="check-circle" class="w-4 h-4 text-primary mt-0.5"></i><span data-i18n="pe_1">Use the pads of your fingers to feel for lumps</span></li>
              <li class="flex items-start gap-2"><i data-feather="check-circle" class="w-4 h-4 text-primary mt-0.5"></i><span data-i18n="pe_2">Cover the entire breast from top to bottom, side to side</span></li>
              <li class="flex items-start gap-2"><i data-feather="check-circle" class="w-4 h-4 text-primary mt-0.5"></i><span data-i18n="pe_3">Check under the armpit and up to the collarbone</span></li>
            </ul>
          </div>
        </div>
        <div class="mt-6">
          <a href="#resources" class="inline-flex items-center gap-2 text-primary font-medium">
            <span data-i18n="watch_videos">Watch instructional videos</span>
            <i data-feather="arrow-right" class="w-4 h-4"></i>
          </a>
        </div>
      </div>
    </section>

    <!-- Clinics -->
    <section id="view-clinics" class="hidden space-y-6">
      <div class="card p-6">
        <div class="flex flex-col md:flex-row justify-between gap-4 mb-6">
          <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-1" data-i18n="clinics_title">Mammography Clinics in Astana</h2>
            <p class="text-gray-600" data-i18n="clinics_sub">Find screening centers near you</p>
          </div>
          <div class="flex items-center gap-3">
            <button id="btn-add-clinic" class="flex items-center gap-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-pink-600 transition">
              <i data-feather="plus" class="w-4 h-4"></i>
              <span data-i18n="add_clinic">Add Clinic</span>
            </button>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="lg:col-span-2 space-y-4">
            <div class="flex flex-wrap gap-3">
              <div class="flex-1 min-w-[200px]">
                <label for="search-clinics" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="search_label">Search</label>
                <div class="relative">
                  <input type="text" id="search-clinics" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"
                         data-i18n-placeholder="search_ph" placeholder="Clinic name or address..." />
                  <i data-feather="search" class="absolute right-3 top-2.5 text-gray-400 w-5 h-5"></i>
                </div>
              </div>
              <div class="min-w-[160px]">
                <label for="filter-type" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="filter_label">Filter by type</label>
                <select id="filter-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
                  <option value="" data-i18n="type_all">All types</option>
                  <option value="public" data-i18n="type_public">Public</option>
                  <option value="private" data-i18n="type_private">Private</option>
                  <option value="research" data-i18n="type_research">Research Center</option>
                </select>
              </div>
              <div class="flex items-end">
                <button id="btn-apply-filters" class="px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition h-[42px]" data-i18n="apply_btn">Apply</button>
              </div>
            </div>

            <div id="map" class="w-full"></div>

            <div class="text-sm text-gray-500">
              <p data-i18n="map_hint">Click on map markers for more information. Use the "Directions" button to open in Google Maps.</p>
            </div>
          </div>

          <div>
            <h3 class="font-semibold text-gray-800 mb-3" data-i18n="clinic_list">Clinic List</h3>
            <div id="clinics-list" class="space-y-3 max-h-[600px] overflow-y-auto pr-2"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Resources -->
    <section id="view-resources" class="hidden space-y-6">
      <div class="card p-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-6" data-i18n="resources_title">Educational Resources</h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
              <i data-feather="video" class="w-5 h-5 text-primary"></i>
              <span data-i18n="videos_heading">Instructional Videos</span>
            </h3>

            <div class="space-y-4">
              <div class="article-card p-4 border border-gray-200 rounded-lg hover:border-primary transition cursor-pointer">
                <div class="aspect-w-16 aspect-h-9 mb-3">
                  <div class="relative pt-[56.25%] rounded-lg overflow-hidden bg-gray-100">
                    <img src="http://static.photos/medical/640x360/2" alt="Self-examination video" class="absolute inset-0 w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                      <div class="w-12 h-12 bg-white/80 rounded-full flex items-center justify-center">
                        <i data-feather="play" class="w-5 h-5 text-primary"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <h4 class="font-medium text-gray-800 mb-1" data-i18n="video1_title">How to Perform Breast Self-Examination</h4>
                <p class="text-sm text-gray-600 mb-2" data-i18n="video1_desc">Step-by-step guide for monthly self-checks</p>
                <div class="flex justify-between items-center text-xs text-gray-500"><span>WHO Health Channel</span><span>8 min</span></div>
              </div>

              <div class="article-card p-4 border border-gray-200 rounded-lg hover:border-primary transition cursor-pointer">
                <div class="aspect-w-16 aspect-h-9 mb-3">
                  <div class="relative pt-[56.25%] rounded-lg overflow-hidden bg-gray-100">
                    <img src="http://static.photos/medical/640x360/3" alt="Mammography explained" class="absolute inset-0 w-full h-full object-cover">
                    <div class="absolute inset-0 flex items-center justify-center">
                      <div class="w-12 h-12 bg-white/80 rounded-full flex items-center justify-center">
                        <i data-feather="play" class="w-5 h-5 text-primary"></i>
                      </div>
                    </div>
                  </div>
                </div>
                <h4 class="font-medium text-gray-800 mb-1" data-i18n="video2_title">Understanding Mammography</h4>
                <p class="text-sm text-gray-600 mb-2" data-i18n="video2_desc">What to expect during your screening</p>
                <div class="flex justify-between items-center text-xs text-gray-500"><span>National Cancer Institute</span><span>12 min</span></div>
              </div>
            </div>

            <div class="mt-6">
              <a href="https://www.youtube.com/results?search_query=breast+self+examination" target="_blank" rel="noopener" class="inline-flex items-center gap-2 text-primary font-medium">
                <span data-i18n="more_videos">More videos on YouTube</span>
                <i data-feather="external-link" class="w-4 h-4"></i>
              </a>
            </div>
          </div>

          <div>
            <h3 class="text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2">
              <i data-feather="book-open" class="w-5 h-5 text-secondary"></i>
              <span data-i18n="articles_heading">Articles & Guides</span>
            </h3>

            <div id="articles-list" class="space-y-3"></div>

            <div class="mt-6">
              <a href="https://www.who.int/news-room/fact-sheets/detail/breast-cancer" target="_blank" rel="noopener" class="inline-flex items-center gap-2 text-primary font-medium">
                <span data-i18n="more_from_who">More resources from WHO</span>
                <i data-feather="external-link" class="w-4 h-4"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About -->
    <section id="view-about" class="hidden">
      <div class="card p-6">
        <div class="flex flex-col md:flex-row gap-8">
          <div class="md:w-1/2">
            <h2 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="about_title">About MammoCare</h2>
            <div class="prose text-gray-600">
              <p data-i18n="about_p1">MammoCare is a free resource designed to help women in Astana find mammography screening centers and access reliable information about breast health.</p>
              <p data-i18n="about_p2">Our goal is to promote early detection of breast cancer through education and easy access to screening facilities. Early detection significantly improves treatment outcomes.</p>
              <p data-i18n="about_p3">This project was created as a community service and is not affiliated with any medical institution. Always consult with your healthcare provider for medical advice.</p>
            </div>

            <div class="mt-8">
              <h3 class="text-lg font-semibold text-gray-800 mb-3" data-i18n="disclaimer_title">Disclaimer</h3>
              <p class="text-sm text-gray-600" data-i18n="disclaimer_text">The information provided on this website is for educational purposes only and should not be considered medical advice. Clinic information is provided as-is and may change. Please verify details with the clinic before visiting.</p>
            </div>
          </div>

          <div class="md:w-1/2">
            <div class="bg-gray-50 p-6 rounded-lg">
              <h3 class="text-lg font-semibold text-gray-800 mb-3" data-i18n="contact_title">Contact</h3>
              <p class="text-gray-600 mb-4" data-i18n="contact_desc">Have questions or suggestions? We'd love to hear from you.</p>

              <div class="space-y-3">
                <div class="flex items-center gap-3">
                  <div class="p-2 rounded-full bg-gray-100 text-gray-600"><i data-feather="mail" class="w-5 h-5"></i></div>
                  <span class="text-gray-700">info@mammocare.kz</span>
                </div>

                <div class="flex items-center gap-3">
                  <div class="p-2 rounded-full bg-gray-100 text-gray-600"><i data-feather="github" class="w-5 h-5"></i></div>
                  <a href="https://github.com/yourusername/mammocare" target="_blank" rel="noopener" class="text-primary hover:underline" data-i18n="github_repo">GitHub Repository</a>
                </div>

                <div class="flex items-center gap-3">
                  <div class="p-2 rounded-full bg-gray-100 text-gray-600"><i data-feather="heart" class="w-5 h-5"></i></div>
                  <span class="text-gray-700" data-i18n="support_text">Support our initiative</span>
                </div>
              </div>

              <div class="mt-6 pt-6 border-t border-gray-200">
                <h3 class="text-lg font-semibold text-gray-800 mb-3" data-i18n="credits_title">Credits</h3>
                <ul class="text-sm text-gray-600 space-y-2">
                  <li>Map data ¬© OpenStreetMap contributors</li>
                  <li>Icons by Feather Icons</li>
                  <li data-i18n="credits_med">Medical information from WHO and NHS</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-200 py-6">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="flex items-center gap-2 mb-4 md:mb-0">
          <div class="text-xl text-primary"><i data-feather="heart"></i></div>
          <span class="font-medium text-gray-800">MammoCare</span>
        </div>

        <div class="flex space-x-4">
          <a href="#home" class="tab-button px-3 py-1 text-gray-600 hover:text-primary" data-view="home"><i data-feather="home" class="w-4 h-4 md:hidden"></i><span class="hidden md:inline" data-i18n="home">Home</span></a>
          <a href="#clinics" class="tab-button px-3 py-1 text-gray-600 hover:text-primary" data-view="clinics"><i data-feather="map" class="w-4 h-4 md:hidden"></i><span class="hidden md:inline" data-i18n="clinics">Clinics</span></a>
          <a href="#resources" class="tab-button px-3 py-1 text-gray-600 hover:text-primary" data-view="resources"><i data-feather="book" class="w-4 h-4 md:hidden"></i><span class="hidden md:inline" data-i18n="resources">Resources</span></a>
          <a href="#about" class="tab-button px-3 py-1 text-gray-600 hover:text-primary" data-view="about"><i data-feather="info" class="w-4 h-4 md:hidden"></i><span class="hidden md:inline" data-i18n="about">About</span></a>
        </div>

        <div class="mt-4 md:mt-0 text-sm text-gray-500">¬© 2025 MammoCare. <span data-i18n="rights">All rights reserved.</span></div>
      </div>
    </div>
  </footer>

  <!-- Add Clinic Modal -->
  <div id="add-clinic-modal" class="fixed inset-0 z-50 hidden modal-overlay flex items-center justify-center p-4">
    <div class="modal-content bg-white rounded-lg w-full max-w-md">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-gray-800" data-i18n="modal_add_title">Add New Clinic</h3>
          <button id="close-add-clinic-modal" class="text-gray-400 hover:text-gray-500"><i data-feather="x" class="w-5 h-5"></i></button>
        </div>

        <div class="space-y-4">
          <div>
            <label for="clinic-name" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fld_name">Clinic Name</label>
            <input type="text" id="clinic-name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
          </div>
          <div>
            <label for="clinic-address" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fld_addr">Address</label>
            <input type="text" id="clinic-address" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
          </div>
          <div>
            <label for="clinic-type" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fld_type">Type</label>
            <select id="clinic-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
              <option value="public" data-i18n="type_public">Public</option>
              <option value="private" data-i18n="type_private">Private</option>
              <option value="research" data-i18n="type_research">Research Center</option>
            </select>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label for="clinic-lat" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fld_lat">Latitude</label>
              <input type="number" step="0.000001" id="clinic-lat" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
            </div>
            <div>
              <label for="clinic-lng" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fld_lng">Longitude</label>
              <input type="number" step="0.000001" id="clinic-lng" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary">
            </div>
          </div>
          <div>
            <label for="clinic-notes" class="block text-sm font-medium text-gray-700 mb-1" data-i18n="fld_notes">Notes (optional)</label>
            <textarea id="clinic-notes" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary"></textarea>
          </div>
        </div>

        <div class="mt-6 flex justify-end gap-3">
          <button id="cancel-add-clinic" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50" data-i18n="btn_cancel">Cancel</button>
          <button id="save-clinic" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-pink-600" data-i18n="btn_save">Save Clinic</button>
        </div>
      </div>
    </div>
  </div>

  <!-- App Scripts -->
  <script>
    // -------------------- Translations --------------------
    const translations = {
      en: {
        home: "Home", clinics: "Clinics", resources: "Resources", about: "About", city: "Astana", rights: "All rights reserved.",
        hero_title: "Breast Cancer Screening in Astana",
        hero_desc: "Find mammography clinics near you, learn about self-examination techniques, and access educational resources about breast health.",
        cta_find_clinics: "Find Clinics", cta_learn_more: "Learn More",
        tip1_title: "Regular Screening", tip1_text: "Women 40+ should discuss mammography screening with their doctor. Early detection saves lives.",
        tip2_title: "Monthly Check", tip2_text: "Perform breast self-examination once a month, ideally a few days after your period ends.",
        tip3_title: "Healthy Lifestyle", tip3_text: "Maintain a healthy weight, exercise regularly, and limit alcohol consumption to reduce risk.",
        tip4_title: "Know the Signs", tip4_text: "Look for lumps, skin changes, nipple discharge, or persistent pain. Report changes to your doctor.",
        quick_guide: "Quick Self-Check Guide",
        visual_inspection: "Visual Inspection", vi_1: "Stand in front of a mirror with shoulders straight and arms on hips", vi_2: "Look for any changes in size, shape, or color", vi_3: "Check for dimpling, puckering, or bulging of the skin",
        physical_exam: "Physical Examination", pe_1: "Use the pads of your fingers to feel for lumps", pe_2: "Cover the entire breast from top to bottom, side to side", pe_3: "Check under the armpit and up to the collarbone",
        watch_videos: "Watch instructional videos",
        clinics_title: "Mammography Clinics in Astana", clinics_sub: "Find screening centers near you",
        add_clinic: "Add Clinic", search_label: "Search",
        search_ph: "Clinic name or address...", filter_label: "Filter by type", type_all: "All types", type_public: "Public", type_private: "Private", type_research: "Research Center", apply_btn: "Apply",
        map_hint: "Click on map markers for more information. Use the \"Directions\" button to open in Google Maps.",
        clinic_list: "Clinic List", no_results: "No clinics found matching your criteria",
        show_on_map: "Show on map", directions: "Directions", get_directions: "Get Directions", read_article: "Read article",
        resources_title: "Educational Resources", videos_heading: "Instructional Videos",
        video1_title: "How to Perform Breast Self-Examination", video1_desc: "Step-by-step guide for monthly self-checks",
        video2_title: "Understanding Mammography", video2_desc: "What to expect during your screening",
        more_videos: "More videos on YouTube", articles_heading: "Articles & Guides", more_from_who: "More resources from WHO",
        about_title: "About MammoCare", about_p1: "MammoCare is a free resource designed to help women in Astana find mammography screening centers and access reliable information about breast health.",
        about_p2: "Our goal is to promote early detection of breast cancer through education and easy access to screening facilities. Early detection significantly improves treatment outcomes.",
        about_p3: "This project was created as a community service and is not affiliated with any medical institution. Always consult with your healthcare provider for medical advice.",
        disclaimer_title: "Disclaimer",
        disclaimer_text: "The information provided on this website is for educational purposes only and should not be considered medical advice. Clinic information is provided as-is and may change. Please verify details with the clinic before visiting.",
        contact_title: "Contact", contact_desc: "Have questions or suggestions? We'd love to hear from you.",
        github_repo: "GitHub Repository", support_text: "Support our initiative",
        credits_title: "Credits", credits_med: "Medical information from WHO and NHS",
        modal_add_title: "Add New Clinic", fld_name: "Clinic Name", fld_addr: "Address", fld_type: "Type", fld_lat: "Latitude", fld_lng: "Longitude", fld_notes: "Notes (optional)",
        btn_cancel: "Cancel", btn_save: "Save Clinic",
        card_public: "Public", card_private: "Private", card_research: "Research"
      },
      ru: {
        home: "–ì–ª–∞–≤–Ω–∞—è", clinics: "–ö–ª–∏–Ω–∏–∫–∏", resources: "–†–µ—Å—É—Ä—Å—ã", about: "–û –ø—Ä–æ–µ–∫—Ç–µ", city: "–ê—Å—Ç–∞–Ω–∞", rights: "–í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.",
        hero_title: "–°–∫—Ä–∏–Ω–∏–Ω–≥ —Ä–∞–∫–∞ –≥—Ä—É–¥–∏ –≤ –ê—Å—Ç–∞–Ω–µ",
        hero_desc: "–ù–∞–π–¥–∏—Ç–µ –∫–ª–∏–Ω–∏–∫–∏ –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏–∏ —Ä—è–¥–æ–º —Å –≤–∞–º–∏, –∏–∑—É—á–∏—Ç–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Å–∞–º–æ–æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º –æ –∑–¥–æ—Ä–æ–≤—å–µ –≥—Ä—É–¥–∏.",
        cta_find_clinics: "–ù–∞–π—Ç–∏ –∫–ª–∏–Ω–∏–∫–∏", cta_learn_more: "–£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ",
        tip1_title: "–†–µ–≥—É–ª—è—Ä–Ω—ã–π —Å–∫—Ä–∏–Ω–∏–Ω–≥", tip1_text: "–ñ–µ–Ω—â–∏–Ω–∞–º 40+ —Å—Ç–æ–∏—Ç –æ–±—Å—É–¥–∏—Ç—å –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—é —Å –≤—Ä–∞—á–æ–º. –†–∞–Ω–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ —Å–ø–∞—Å–∞–µ—Ç –∂–∏–∑–Ω–∏.",
        tip2_title: "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞", tip2_text: "–ü—Ä–æ–≤–æ–¥–∏—Ç–µ —Å–∞–º–æ–æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≥—Ä—É–¥–∏ —Ä–∞–∑ –≤ –º–µ—Å—è—Ü, –ª—É—á—à–µ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–æ—Å–ª–µ –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏.",
        tip3_title: "–ó–¥–æ—Ä–æ–≤—ã–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏", tip3_text: "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∑–¥–æ—Ä–æ–≤—ã–π –≤–µ—Å, –∑–∞–Ω–∏–º–∞–π—Ç–µ—Å—å —Å–ø–æ—Ä—Ç–æ–º –∏ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ –∞–ª–∫–æ–≥–æ–ª—å, —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å —Ä–∏—Å–∫.",
        tip4_title: "–ó–Ω–∞–π—Ç–µ –ø—Ä–∏–∑–Ω–∞–∫–∏", tip4_text: "–û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —É–ø–ª–æ—Ç–Ω–µ–Ω–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–∂–∏, –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏–∑ —Å–æ—Å–∫–∞ –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é –±–æ–ª—å. –°–æ–æ–±—â–∏—Ç–µ –≤—Ä–∞—á—É.",
        quick_guide: "–ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∞–º–æ–æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é",
        visual_inspection: "–í–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Å–º–æ—Ç—Ä", vi_1: "–í—Å—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–µ–¥ –∑–µ—Ä–∫–∞–ª–æ–º, –≤—ã–ø—Ä—è–º–∏–≤ –ø–ª–µ—á–∏, —Ä—É–∫–∏ –Ω–∞ –±–µ–¥—Ä–∞—Ö", vi_2: "–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞, —Ñ–æ—Ä–º—ã –∏–ª–∏ —Ü–≤–µ—Ç–∞", vi_3: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –≤—Ç—è–∂–µ–Ω–∏—è, —è–º–æ—á–∫–∏ –∏–ª–∏ –≤—ã–ø—É–∫–ª–æ—Å—Ç–∏ –∫–æ–∂–∏",
        physical_exam: "–ü–∞–ª—å–ø–∞—Ü–∏—è", pe_1: "–ü–æ–¥—É—à–µ—á–∫–∞–º–∏ –ø–∞–ª—å—Ü–µ–≤ –ø—Ä–æ—â—É–ø–∞–π—Ç–µ —Ç–∫–∞–Ω–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —É–ø–ª–æ—Ç–Ω–µ–Ω–∏–π", pe_2: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å—é –≥—Ä—É–¥—å —Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑ –∏ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ –∫ –±–æ–∫–∞–º", pe_3: "–û—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥–º—ã—à–∫—É –∏ –¥–æ –∫–ª—é—á–∏—Ü—ã",
        watch_videos: "–°–º–æ—Ç—Ä–µ—Ç—å –æ–±—É—á–∞—é—â–∏–µ –≤–∏–¥–µ–æ",
        clinics_title: "–ö–ª–∏–Ω–∏–∫–∏ –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –ê—Å—Ç–∞–Ω–µ", clinics_sub: "–ù–∞–π–¥–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–µ —Ü–µ–Ω—Ç—Ä—ã —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞",
        add_clinic: "–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–Ω–∏–∫—É", search_label: "–ü–æ–∏—Å–∫",
        search_ph: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∏–Ω–∏–∫–∏ –∏–ª–∏ –∞–¥—Ä–µ—Å‚Ä¶", filter_label: "–§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É", type_all: "–í—Å–µ —Ç–∏–ø—ã", type_public: "–ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–∞—è", type_private: "–ß–∞—Å—Ç–Ω–∞—è", type_research: "–ù–∞—É—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä", apply_btn: "–ü—Ä–∏–º–µ–Ω–∏—Ç—å",
        map_hint: "–ö–ª–∏–∫–Ω–∏—Ç–µ –ø–æ –º–∞—Ä–∫–µ—Ä—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏. –ö–Ω–æ–ø–∫–∞ ¬´–ú–∞—Ä—à—Ä—É—Ç¬ª –æ—Ç–∫—Ä–æ–µ—Ç Google Maps.",
        clinic_list: "–°–ø–∏—Å–æ–∫ –∫–ª–∏–Ω–∏–∫", no_results: "–ü–æ–¥ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",
        show_on_map: "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ", directions: "–ú–∞—Ä—à—Ä—É—Ç", get_directions: "–ú–∞—Ä—à—Ä—É—Ç", read_article: "–ß–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç—å—é",
        resources_title: "–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã", videos_heading: "–û–±—É—á–∞—é—â–∏–µ –≤–∏–¥–µ–æ",
        video1_title: "–ö–∞–∫ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Å–∞–º–æ–æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≥—Ä—É–¥–∏", video1_desc: "–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –µ–∂–µ–º–µ—Å—è—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏",
        video2_title: "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è", video2_desc: "–ß–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞",
        more_videos: "–ë–æ–ª—å—à–µ –≤–∏–¥–µ–æ –Ω–∞ YouTube", articles_heading: "–°—Ç–∞—Ç—å–∏ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞", more_from_who: "–ë–æ–ª—å—à–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –í–û–ó",
        about_title: "–û MammoCare", about_p1: "MammoCare ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ä–µ—Å—É—Ä—Å, –ø–æ–º–æ–≥–∞—é—â–∏–π –∂–µ–Ω—â–∏–Ω–∞–º –≤ –ê—Å—Ç–∞–Ω–µ –Ω–∞–π—Ç–∏ –∫–ª–∏–Ω–∏–∫–∏ –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–¥–æ—Ä–æ–≤—å–µ –≥—Ä—É–¥–∏.",
        about_p2: "–ù–∞—à–∞ —Ü–µ–ª—å ‚Äî —Ä–∞–Ω–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ —Ä–∞–∫–∞ –≥—Ä—É–¥–∏ —á–µ—Ä–µ–∑ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ—Å—Ç–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–∫—Ä–∏–Ω–∏–Ω–≥—É. –≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ª–µ—á–µ–Ω–∏—è.",
        about_p3: "–ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–≤—è–∑–∞–Ω —Å –º–µ–¥—É—á—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –∏ —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞. –ü–æ –º–µ–¥–≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É.",
        disclaimer_title: "–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏",
        disclaimer_text: "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç–µ –Ω–æ—Å–∏—Ç –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ–¥—Å–æ–≤–µ—Ç–æ–º. –î–∞–Ω–Ω—ã–µ –æ –∫–ª–∏–Ω–∏–∫–∞—Ö –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è ‚Äî —É—Ç–æ—á–Ω—è–π—Ç–µ –ø–µ—Ä–µ–¥ –≤–∏–∑–∏—Ç–æ–º.",
        contact_title: "–ö–æ–Ω—Ç–∞–∫—Ç—ã", contact_desc: "–ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –∏–¥–µ–∏? –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º.",
        github_repo: "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub", support_text: "–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É",
        credits_title: "–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏", credits_med: "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: –í–û–ó –∏ NHS",
        modal_add_title: "–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–Ω–∏–∫—É", fld_name: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∏–Ω–∏–∫–∏", fld_addr: "–ê–¥—Ä–µ—Å", fld_type: "–¢–∏–ø", fld_lat: "–®–∏—Ä–æ—Ç–∞", fld_lng: "–î–æ–ª–≥–æ—Ç–∞", fld_notes: "–ü—Ä–∏–º–µ—á–∞–Ω–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",
        btn_cancel: "–û—Ç–º–µ–Ω–∞", btn_save: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å",
        card_public: "–ì–æ—Å", card_private: "–ß–∞—Å—Ç–Ω–∞—è", card_research: "–ù–∞—É—á–Ω—ã–π"
      },
      kz: {
        home: "–ë–∞—Å—Ç—ã", clinics: "–ö–ª–∏–Ω–∏–∫–∞–ª–∞—Ä", resources: "–†–µ—Å—É—Ä—Å—Ç–∞—Ä", about: "–ñ–æ–±–∞ —Ç—É—Ä–∞–ª—ã", city: "–ê—Å—Ç–∞–Ω–∞", rights: "–ë–∞—Ä–ª—ã“õ “õ“±“õ—ã“õ—Ç–∞—Ä “õ–æ—Ä“ì–∞–ª“ì–∞–Ω.",
        hero_title: "–ê—Å—Ç–∞–Ω–∞–¥–∞ —Å“Ø—Ç –±–µ–∑—ñ “õ–∞—Ç–µ—Ä–ª—ñ —ñ—Å—ñ–≥—ñ–Ω —Å–∫—Ä–∏–Ω–∏–Ω–≥—Ç–µ—É",
        hero_desc: "–ñ–∞“õ—ã–Ω –º–∞“£–¥–∞“ì—ã –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è –∫–ª–∏–Ω–∏–∫–∞–ª–∞—Ä—ã–Ω —Ç–∞–±—ã“£—ã–∑, ”©–∑—ñ–Ω-”©–∑—ñ —Ç–µ–∫—Å–µ—Ä—É ”ô–¥—ñ—Å—Ç–µ—Ä—ñ–Ω “Ø–π—Ä–µ–Ω—ñ“£—ñ–∑ –∂”ô–Ω–µ —Å–µ–Ω—ñ–º–¥—ñ –±—ñ–ª—ñ–º –∫”©–∑–¥–µ—Ä—ñ–Ω–µ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—ñ“£—ñ–∑.",
        cta_find_clinics: "–ö–ª–∏–Ω–∏–∫–∞–ª–∞—Ä–¥—ã —Ç–∞–±—É", cta_learn_more: "–ö”©–±—ñ—Ä–µ–∫ –±—ñ–ª—É",
        tip1_title: "–¢“±—Ä–∞“õ—Ç—ã —Å–∫—Ä–∏–Ω–∏–Ω–≥", tip1_text: "40+ –∂–∞—Å—Ç–∞“ì—ã ”ô–π–µ–ª–¥–µ—Ä –¥”ô—Ä—ñ–≥–µ—Ä–º–µ–Ω –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è–Ω—ã —Ç–∞–ª“õ—ã–ª–∞—É—ã –∫–µ—Ä–µ–∫. –ï—Ä—Ç–µ –∞–Ω—ã“õ—Ç–∞—É ”©–º—ñ—Ä —Å–∞“õ—Ç–∞–π–¥—ã.",
        tip2_title: "–ê–π —Å–∞–π—ã–Ω“ì—ã —Ç–µ–∫—Å–µ—Ä—É", tip2_text: "”®–∑—ñ–Ω-”©–∑—ñ —Ç–µ–∫—Å–µ—Ä—É–¥—ñ –∞–π—ã–Ω–∞ –±—ñ—Ä —Ä–µ—Ç, –µ—Ç–µ–∫–∫—ñ—Ä–¥–µ–Ω –±—ñ—Ä–Ω–µ—à–µ –∫“Ø–Ω ”©—Ç–∫–µ–Ω —Å–æ“£ –∂–∞—Å–∞“£—ã–∑.",
        tip3_title: "–î–µ–Ω—Å–∞—É–ª—ã“õ—Ç—ã —Å–∞“õ—Ç–∞—É", tip3_text: "–î“±—Ä—ã—Å —Å–∞–ª–º–∞“õ—Ç—ã “±—Å—Ç–∞–Ω—ã“£—ã–∑, —Ç“±—Ä–∞“õ—Ç—ã “õ–æ–∑“ì–∞–ª—ã—Å –∂–∞—Å–∞“£—ã–∑ –∂”ô–Ω–µ –∞–ª–∫–æ–≥–æ–ª—å–¥—ñ —à–µ–∫—Ç–µ“£—ñ–∑.",
        tip4_title: "–ë–µ–ª–≥—ñ–ª–µ—Ä–¥—ñ –±—ñ–ª—ñ“£—ñ–∑", tip4_text: "–¢“Ø–π—ñ–Ω–¥–µ—Ä, —Ç–µ—Ä—ñ ”©–∑–≥–µ—Ä—ñ—Å—Ç–µ—Ä—ñ, –±”©–ª—ñ–Ω—ñ—Å –Ω–µ–º–µ—Å–µ —Ç“±—Ä–∞“õ—Ç—ã –∞—É—ã—Ä—Å—ã–Ω—É“ì–∞ –º”ô–Ω –±–µ—Ä—ñ–ø, –¥”ô—Ä—ñ–≥–µ—Ä–≥–µ –∞–π—Ç—ã“£—ã–∑.",
        quick_guide: "–ñ–µ–¥–µ–ª ”©–∑—ñ–Ω-”©–∑—ñ —Ç–µ–∫—Å–µ—Ä—É –Ω“±—Å“õ–∞—É–ª—ã“ì—ã",
        visual_inspection: "–ö”©—Ä—É –∞—Ä“õ—ã–ª—ã —Ç–µ–∫—Å–µ—Ä—É", vi_1: "–ê–π–Ω–∞ –∞–ª–¥—ã–Ω–¥–∞ —Ç“±—Ä—ã“£—ã–∑, –∏—ã“õ —Ç—ñ–∫, “õ–æ–ª –±–µ–ª–¥–µ", vi_2: "”®–ª—à–µ–º—ñ, –ø—ñ—à—ñ–Ω—ñ, —Ç“Ø—Å—ñ ”©–∑–≥–µ—Ä—ñ—Å—ñ–Ω –±–∞–π“õ–∞“£—ã–∑", vi_3: "–¢–µ—Ä—ñ–¥–µ–≥—ñ –æ–π—ã“õ, —Ç–∞—Ä—Ç—ã–ª—É, —ñ—Å—ñ–Ω—É–¥—ñ —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑",
        physical_exam: "“ö–æ–ª–º–µ–Ω —Ç–µ–∫—Å–µ—Ä—É", pe_1: "–°–∞—É—Å–∞“õ “±—à—ã–º–µ–Ω —Ç“Ø–π—ñ–Ω–¥–µ—Ä–¥—ñ —Å–µ–∑—ñ–ø –∫”©—Ä—ñ“£—ñ–∑", pe_2: "–ö–µ—É–¥–µ–Ω—ñ —Ç–æ–ª—ã“õ: –∂–æ“ì–∞—Ä—ã-—Ç”©–º–µ–Ω, —à–µ—Ç—ñ–Ω–µ –¥–µ–π—ñ–Ω —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑", pe_3: "“ö–æ–ª—Ç—ã“õ –∞—Å—Ç—ã –º–µ–Ω –±“±“ì–∞–Ω–∞“ì–∞ –¥–µ–π—ñ–Ω “õ–∞—Ä–∞“£—ã–∑",
        watch_videos: "–ù“±—Å“õ–∞—É–ª—ã“õ –≤–∏–¥–µ–æ–ª–∞—Ä–¥—ã “õ–∞—Ä–∞—É",
        clinics_title: "–ê—Å—Ç–∞–Ω–∞–¥–∞“ì—ã –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è –∫–ª–∏–Ω–∏–∫–∞–ª–∞—Ä—ã", clinics_sub: "–ñ–∞“õ—ã–Ω —Å–∫—Ä–∏–Ω–∏–Ω–≥ –æ—Ä—Ç–∞–ª—ã“õ—Ç–∞—Ä—ã–Ω —Ç–∞–±—ã“£—ã–∑",
        add_clinic: "–ö–ª–∏–Ω–∏–∫–∞ “õ–æ—Å—É", search_label: "–Ü–∑–¥–µ—É",
        search_ph: "–ö–ª–∏–Ω–∏–∫–∞ –∞—Ç–∞—É—ã –Ω–µ–º–µ—Å–µ –º–µ–∫–µ–Ω–∂–∞–π—ã‚Ä¶", filter_label: "–¢“Ø—Ä—ñ –±–æ–π—ã–Ω—à–∞ —Å“Ø–∑–≥—ñ", type_all: "–ë–∞—Ä–ª—ã“ì—ã", type_public: "–ú–µ–º–ª–µ–∫–µ—Ç—Ç—ñ–∫", type_private: "–ñ–µ–∫–µ–º–µ–Ω—à—ñ–∫", type_research: "“í—ã–ª—ã–º–∏ –æ—Ä—Ç–∞–ª—ã“õ", apply_btn: "“ö–æ–ª–¥–∞–Ω—É",
        map_hint: "–ú–∞—Ä–∫–µ—Ä–¥—ñ –±–∞—Å—ã–ø, –º”ô–ª—ñ–º–µ—Ç—Ç—ñ “õ–∞—Ä–∞“£—ã–∑. ¬´–ú–∞—Ä—à—Ä—É—Ç¬ª Google Maps-—Ç–∞ –∞—à—ã–ª–∞–¥—ã.",
        clinic_list: "–ö–ª–∏–Ω–∏–∫–∞–ª–∞—Ä —Ç—ñ–∑—ñ–º—ñ", no_results: "–°“Ø–∑–≥—ñ–≥–µ —Å–∞–π –∫–ª–∏–Ω–∏–∫–∞ —Ç–∞–±—ã–ª–º–∞–¥—ã",
        show_on_map: "–ö–∞—Ä—Ç–∞–¥–∞–Ω –∫”©—Ä—Å–µ—Ç—É", directions: "–ú–∞—Ä—à—Ä—É—Ç", get_directions: "–ú–∞—Ä—à—Ä—É—Ç", read_article: "–ú–∞“õ–∞–ª–∞–Ω—ã –æ“õ—É",
        resources_title: "–ë—ñ–ª—ñ–º —Ä–µ—Å—É—Å—Ç–∞—Ä—ã", videos_heading: "–ù“±—Å“õ–∞—É–ª—ã“õ –≤–∏–¥–µ–æ–ª–∞—Ä",
        video1_title: "”®–∑—ñ–Ω-”©–∑—ñ —Ç–µ–∫—Å–µ—Ä—É–¥—ñ “õ–∞–ª–∞–π –∂–∞—Å–∞—É –∫–µ—Ä–µ–∫", video1_desc: "–ê–π —Å–∞–π—ã–Ω“ì—ã —Ç–µ–∫—Å–µ—Ä—É–≥–µ –∞—Ä–Ω–∞–ª“ì–∞–Ω “õ–∞–¥–∞–º–¥—ã“õ –Ω“±—Å“õ–∞—É–ª—ã“õ",
        video2_title: "–ú–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è–Ω—ã —Ç“Ø—Å—ñ–Ω—É", video2_desc: "–°–∫—Ä–∏–Ω–∏–Ω–≥ –∫–µ–∑—ñ–Ω–¥–µ –Ω–µ –∫“Ø—Ç—É –∫–µ—Ä–µ–∫",
        more_videos: "YouTube-—Ç–∞ –∫”©–±—ñ—Ä–µ–∫ –≤–∏–¥–µ–æ", articles_heading: "–ú–∞“õ–∞–ª–∞–ª–∞—Ä –º–µ–Ω –Ω“±—Å“õ–∞—É–ª—ã“õ—Ç–∞—Ä", more_from_who: "–î–î“∞ –º–∞—Ç–µ—Ä–∏–∞–ª–¥–∞—Ä—ã",
        about_title: "MammoCare —Ç—É—Ä–∞–ª—ã", about_p1: "MammoCare ‚Äî –ê—Å—Ç–∞–Ω–∞–¥–∞“ì—ã –º–∞–º–º–æ–≥—Ä–∞—Ñ–∏—è –∫–ª–∏–Ω–∏–∫–∞–ª–∞—Ä—ã–Ω –∂”ô–Ω–µ —Å–µ–Ω—ñ–º–¥—ñ –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã —Ç–∞–±—É“ì–∞ –∫”©–º–µ–∫—Ç–µ—Å–µ—Ç—ñ–Ω —Ç–µ–≥—ñ–Ω —Ä–µ—Å—É—Ä—Å.",
        about_p2: "–ú–∞“õ—Å–∞—Ç—ã–º—ã–∑ ‚Äî –±—ñ–ª—ñ–º –±–µ—Ä—É –∂”ô–Ω–µ —Å–∫—Ä–∏–Ω–∏–Ω–≥–∫–µ “õ–æ–ª–∂–µ—Ç—ñ–º–¥—ñ–ª—ñ–∫ –∞—Ä“õ—ã–ª—ã –µ—Ä—Ç–µ –∞–Ω—ã“õ—Ç–∞—É–¥—ã –∞—Ä—Ç—Ç—ã—Ä—É. –ë“±–ª –µ–º –Ω”ô—Ç–∏–∂–µ—Å—ñ–Ω –∂–∞“õ—Å–∞—Ä—Ç–∞–¥—ã.",
        about_p3: "–ñ–æ–±–∞ –º–µ–¥–∏—Ü–∏–Ω–∞–ª—ã“õ –º–µ–∫–µ–º–µ–ª–µ—Ä–≥–µ “õ–∞—Ç—ã—Å—ã –∂–æ“õ “õ–æ“ì–∞–º–¥—ã“õ –±–∞—Å—Ç–∞–º–∞. –ú–µ–¥–∏—Ü–∏–Ω–∞–ª—ã“õ –∫–µ“£–µ—Å “Ø—à—ñ–Ω –¥”ô—Ä—ñ–≥–µ—Ä–≥–µ –∂“Ø–≥—ñ–Ω—ñ“£—ñ–∑.",
        disclaimer_title: "–ñ–∞—É–∞–ø–∫–µ—Ä—à—ñ–ª—ñ–∫—Ç–µ–Ω –±–∞—Å —Ç–∞—Ä—Ç—É",
        disclaimer_text: "–ú“±–Ω–¥–∞“ì—ã –∞“õ–ø–∞—Ä–∞—Ç –æ“õ—É –º–∞“õ—Å–∞—Ç—ã–Ω–¥–∞. –ö–ª–∏–Ω–∏–∫–∞ –º”ô–ª—ñ–º–µ—Ç—Ç–µ—Ä—ñ ”©–∑–≥–µ—Ä—É—ñ –º“Ø–º–∫—ñ–Ω ‚Äî –±–∞—Ä–º–∞—Å –±“±—Ä—ã–Ω –Ω–∞“õ—Ç—ã–ª–∞“£—ã–∑.",
        contact_title: "–ë–∞–π–ª–∞–Ω—ã—Å", contact_desc: "–°“±—Ä–∞“õ –Ω–µ–º–µ—Å–µ “±—Å—ã–Ω—ã—Å—Ç–∞—Ä—ã“£—ã–∑ –±–∞—Ä –º–∞? –ë—ñ–∑–≥–µ –∂–∞–∑—ã“£—ã–∑.",
        github_repo: "GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π—ñ", support_text: "–ë–∞—Å—Ç–∞–º–∞–Ω—ã “õ–æ–ª–¥–∞—É",
        credits_title: "–ê–ª“ì—ã—Å", credits_med: "–ú–µ–¥–∏—Ü–∏–Ω–∞–ª—ã“õ –∞“õ–ø–∞—Ä–∞—Ç: –î–î–°“∞ –∂”ô–Ω–µ NHS",
        modal_add_title: "–ñ–∞“£–∞ –∫–ª–∏–Ω–∏–∫–∞ “õ–æ—Å—É", fld_name: "–ö–ª–∏–Ω–∏–∫–∞ –∞—Ç–∞—É—ã", fld_addr: "–ú–µ–∫–µ–Ω–∂–∞–π", fld_type: "–¢“Ø—Ä—ñ", fld_lat: "–ï–Ω–¥—ñ–∫", fld_lng: "–ë–æ–π–ª—ã“õ", fld_notes: "–ï—Å–∫–µ—Ä—Ç–ø–µ (–º—ñ–Ω–¥–µ—Ç—Ç—ñ –µ–º–µ—Å)",
        btn_cancel: "–ë–æ–ª–¥—ã—Ä–º–∞—É", btn_save: "–°–∞“õ—Ç–∞—É",
        card_public: "–ú–µ–º–ª.", card_private: "–ñ–µ–∫–µ", card_research: "“í—ã–ª."
      }
    };

    // -------------------- Data --------------------
    const clinics = [
      { id: 1, name: "City Hospital ‚Ññ2", address: "Turar Ryskulov St, 6", type: "public",  lat: 51.1477, lng: 71.4216, notes: "Government hospital with mammography services" },
      { id: 2, name: "City Polyclinic ‚Ññ9", address: "Mangilik El Ave, 16/1", type: "public",  lat: 51.0899, lng: 71.4165, notes: "Primary care facility with screening services" },
      { id: 3, name: "Multidisciplinary Medical Center", address: "Manas St, 17", type: "private", lat: 51.1260, lng: 71.4000, notes: "Private clinic with digital mammography" },
      { id: 4, name: "Presidential Clinic", address: "Mangilik El Ave, 80", type: "private", lat: 51.0954, lng: 71.4218, notes: "High-end private medical facility" },
      { id: 5, name: "Big Tau Clinic", address: "Turan Ave, 50", type: "private", lat: 51.1325, lng: 71.4301, notes: "Modern private clinic with advanced equipment" },
      { id: 6, name: "Sak Medical Centre", address: "Saryarka Ave, 42", type: "private", lat: 51.1428, lng: 71.4389, notes: "Specialized women's health center" },
      { id: 7, name: "DiVera", address: "Kabanbay Batyr Ave, 47/2", type: "private", lat: 51.1187, lng: 71.4456, notes: "Private diagnostic center" },
      { id: 8, name: "International Oncology Center 'UMIT'", address: "Abylay Khan Ave, 42/1", type: "research", lat: 51.1253, lng: 71.4328, notes: "Comprehensive cancer diagnosis and treatment" },
      { id: 9, name: "Republican Diagnostic Center (UMC)", address: "Sygynak St, 46", type: "public", lat: 51.1356, lng: 71.4254, notes: "National-level diagnostic facility" },
      { id:10, name: "Maternal and Child Health Research Center (UMC)", address: "Turan Ave, 32", type: "research", lat: 51.1298, lng: 71.4287, notes: "Specialized in women's and children's health" },
      { id:11, name: "EMIRMED (Health Research Institute)", address: "Kuishi Dina St, 9", type: "research", lat: 51.1224, lng: 71.4193, notes: "Research institute with diagnostic services" },
      { id:12, name: "Meyirim Medical Center", address: "Koshkarbayev St, 15", type: "private", lat: 51.1312, lng: 71.4356, notes: "Has digital mammography equipment" },
      { id:13, name: "Emergency Medicine Research Institute", address: "Hussein bin Talal St, 14, 3rd floor", type: "research", lat: 51.1276, lng: 71.4372, notes: "Specialized diagnostic services" },
      { id:14, name: "NROC (National Research Oncology Center)", address: "Kabanbay Batyr Ave, 53", type: "research", lat: 51.1201, lng: 71.4428, notes: "Modern equipment, integrated cancer programs" }
    ];

    const articles = [
      { id:1, title:"WHO ‚Äî Breast cancer facts", url:"https://www.who.int/news-room/fact-sheets/detail/breast-cancer", source:"World Health Organization" },
      { id:2, title:"NHS ‚Äî Breast cancer overview", url:"https://www.nhs.uk/conditions/breast-cancer/", source:"UK National Health Service" },
      { id:3, title:"ACS ‚Äî Screening Guidelines", url:"https://www.cancer.org/healthy/find-cancer-early/breast-cancer-screening.html", source:"American Cancer Society" },
      { id:4, title:"Breast self-examination guide", url:"https://www.breastcancer.org/screening-testing/breast-self-exam", source:"BreastCancer.org" },
      { id:5, title:"Mammography: What to expect", url:"https://www.mayoclinic.org/tests-procedures/mammogram/about/pac-20384806", source:"Mayo Clinic" },
      { id:6, title:"Reducing breast cancer risk", url:"https://www.cdc.gov/cancer/breast/basic_info/prevention.htm", source:"CDC" }
    ];

    // -------------------- Utilities --------------------
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;'); }
    function $all(sel){ return Array.from(document.querySelectorAll(sel)); }

    // -------------------- App State --------------------
    let map; let markers = [];
    window.__lastFilter = { search:'', type:'' };
    let currentLanguage = 'en';

    // -------------------- Map + List Renders --------------------
    function initMap(){
      if(map) return;
      map = L.map('map').setView([51.169392,71.449074], 12);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution:'&copy; OpenStreetMap contributors' }).addTo(map);
      renderClinicsOnMap();
    }

    function filterClinics({search='', type=''}){
      const s = (search||'').toLowerCase(); const t = (type||'').toLowerCase();
      return clinics.filter(c=>{
        const mS = !s || c.name.toLowerCase().includes(s) || c.address.toLowerCase().includes(s) || (c.notes||'').toLowerCase().includes(s);
        const mT = !t || c.type===t;
        return mS && mT;
      });
    }

    function renderClinicsOnMap(filter = window.__lastFilter){
      window.__lastFilter = filter;
      if(!map) return;
      markers.forEach(m => map.removeLayer(m)); markers = [];

      const list = filterClinics(filter);
      const t = translations[currentLanguage] || translations.en;

      list.forEach(clinic=>{
        const marker = L.marker([clinic.lat, clinic.lng]).addTo(map);
        const typeLabel = clinic.type==='public' ? t.card_public : clinic.type==='private' ? t.card_private : t.card_research;
        const typeColor = clinic.type==='public' ? '#3b82f6' : clinic.type==='private' ? '#ec4899' : '#8b5cf6';
        marker.bindPopup(`
          <div class="space-y-2" style="min-width:200px;">
            <h4 class="font-semibold text-gray-800">${escapeHtml(clinic.name)}</h4>
            <p class="text-sm text-gray-600">${escapeHtml(clinic.address)}</p>
            <div class="flex items-center gap-2">
              <span class="inline-block w-3 h-3 rounded-full" style="background-color:${typeColor};"></span>
              <span class="text-xs font-medium text-gray-700">${typeLabel}</span>
            </div>
            ${clinic.notes ? `<p class="text-xs text-gray-500 mt-2">${escapeHtml(clinic.notes)}</p>` : ''}
            <div class="mt-2">
              <a href="https://www.google.com/maps?q=${clinic.lat},${clinic.lng}" target="_blank" rel="noopener" class="inline-flex items-center gap-1 text-sm text-primary hover:underline">
                <i data-feather="map-pin" class="w-3 h-3"></i>${t.get_directions}
              </a>
            </div>
          </div>
        `);
        markers.push(marker);
      });

      if(list.length>0){
        const bounds = L.latLngBounds(list.map(c=>[c.lat,c.lng]));
        map.fitBounds(bounds,{ padding:[50,50] });
      }
      if (window.feather && typeof feather.replace==='function') feather.replace();
    }

    function renderClinicsList(filter = window.__lastFilter){
      window.__lastFilter = filter;
      const container = document.getElementById('clinics-list'); if(!container) return;
      const list = filterClinics(filter);
      const dict = translations[currentLanguage] || translations.en;

      if(list.length===0){
        container.innerHTML = `<div class="card p-4 text-center text-gray-500">${dict.no_results}</div>`;
        return;
      }

      container.innerHTML = list.map(clinic=>{
        let badgeClass, typeText;
        if(clinic.type==='public'){ badgeClass='bg-blue-100 text-blue-800'; typeText=dict.card_public; }
        else if(clinic.type==='private'){ badgeClass='bg-pink-100 text-pink-800'; typeText=dict.card_private; }
        else { badgeClass='bg-purple-100 text-purple-800'; typeText=dict.card_research; }

        return `
          <div class="clinic-item card p-4" data-id="${clinic.id}">
            <div class="flex justify-between items-start mb-2">
              <h4 class="font-medium text-gray-800">${escapeHtml(clinic.name)}</h4>
              <span class="text-xs px-2 py-1 rounded-full ${badgeClass}">${typeText}</span>
            </div>
            <p class="text-sm text-gray-600 mb-3">${escapeHtml(clinic.address)}</p>
            ${clinic.notes ? `<p class="text-xs text-gray-500 mb-3">${escapeHtml(clinic.notes)}</p>` : ''}
            <div class="flex flex-wrap gap-2">
              <button class="focus-clinic px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition" data-i18n="show_on_map">${dict.show_on_map}</button>
              <a href="https://www.google.com/maps?q=${clinic.lat},${clinic.lng}" target="_blank" rel="noopener" class="px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded hover:bg-gray-200 transition">${dict.directions}</a>
            </div>
          </div>
        `;
      }).join('');

      document.querySelectorAll('.focus-clinic').forEach(btn=>{
        btn.addEventListener('click', function(){
          const id = parseInt(this.closest('.clinic-item').getAttribute('data-id'));
          const c = clinics.find(x=>x.id===id);
          if(c && map){
            map.setView([c.lat, c.lng], 15);
            markers.forEach(m=>{ const p=m.getLatLng(); if(p.lat===c.lat && p.lng===c.lng) m.openPopup(); });
          }
        });
      });
      if (window.feather && typeof feather.replace==='function') feather.replace();
    }

    function renderArticlesList(){
      const container = document.getElementById('articles-list'); if(!container) return;
      const dict = translations[currentLanguage] || translations.en;
      container.innerHTML = articles.map(a => `
        <a href="${escapeHtml(a.url)}" target="_blank" rel="noopener" class="article-card block p-4 border border-gray-200 rounded-lg hover:border-primary transition">
          <h4 class="font-medium text-gray-800 mb-1">${escapeHtml(a.title)}</h4>
          <p class="text-xs text-gray-500">${escapeHtml(a.source)}</p>
          <div class="mt-2 flex justify-between items-center">
            <span class="text-xs text-primary">${dict.read_article || 'Read article'}</span>
            <i data-feather="external-link" class="w-4 h-4 text-gray-400"></i>
          </div>
        </a>
      `).join('');
      if (window.feather && typeof feather.replace==='function') feather.replace();
    }

    // -------------------- I18N Wiring (robust) --------------------
    (function(){
      const langFromStorage = localStorage.getItem('preferredLanguage');
      const langFromBrowser = (navigator.language || navigator.userLanguage || 'en').slice(0,2).toLowerCase();
      currentLanguage = (['en','ru','kz'].includes(langFromStorage||'')) ? langFromStorage
                       : (['en','ru','kz'].includes(langFromBrowser) ? langFromBrowser : 'en');

      const currentLangEl = document.getElementById('current-lang');
      const currentCityEl = document.getElementById('current-city');

      function applyTranslations(){
        const dict = translations[currentLanguage] || translations.en;
        // Text nodes
        $all('[data-i18n]').forEach(el=>{
          const key = el.getAttribute('data-i18n');
          if (dict[key] != null) el.textContent = dict[key];
        });
        // Placeholders
        $all('[data-i18n-placeholder]').forEach(el=>{
          const key = el.getAttribute('data-i18n-placeholder');
          if (dict[key] != null) el.setAttribute('placeholder', dict[key]);
        });
        // Titles
        $all('[data-i18n-title]').forEach(el=>{
          const key = el.getAttribute('data-i18n-title');
          if (dict[key] != null) el.setAttribute('title', dict[key]);
        });
        if (currentLangEl) currentLangEl.textContent = currentLanguage.toUpperCase();
        if (currentCityEl && dict.city) currentCityEl.textContent = dict.city;

        // Refresh dynamic UI
        try {
          renderClinicsOnMap(window.__lastFilter || {search:'',type:''});
          renderClinicsList(window.__lastFilter || {search:'',type:''});
          renderArticlesList();
        } catch(e){}
      }

      function setLanguage(lang){
        if (!['en','ru','kz'].includes(lang)) return;
        currentLanguage = lang;
        localStorage.setItem('preferredLanguage', lang);
        applyTranslations();
      }

      document.addEventListener('DOMContentLoaded', function(){
        // Init AOS & icons
        AOS.init({ duration: 600, once: true });
        if (window.feather && typeof feather.replace==='function') feather.replace();

        // Mobile menu
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMobileMenu = document.getElementById('close-mobile-menu');
        mobileMenuButton?.addEventListener('click', ()=>{ mobileMenu.classList.remove('hidden'); document.body.style.overflow='hidden'; });
        closeMobileMenu?.addEventListener('click', ()=>{ mobileMenu.classList.add('hidden'); document.body.style.overflow=''; });

        // Routing
        const routes = ["home","clinics","resources","about"];
        function showView(view){
          routes.forEach(v=>{
            document.getElementById(`view-${v}`).classList.add('hidden');
            document.querySelectorAll(`[data-view="${v}"]`).forEach(el=>{
              el.classList.remove('active'); if(el.classList.contains('tab-button')) el.classList.remove('active');
            });
          });
          document.getElementById(`view-${view}`).classList.remove('hidden');
          document.querySelectorAll(`[data-view="${view}"]`).forEach(el=>{
            el.classList.add('active'); if(el.classList.contains('tab-button')) el.classList.add('active');
          });
          localStorage.setItem('lastView', view);
          if(view==='clinics') initMap();
        }
        function parseRoute(){ const hash=(window.location.hash.substring(1)||'home'); showView(routes.includes(hash)?hash:'home'); }
        window.addEventListener('hashchange', parseRoute); parseRoute();

        // Language switcher
        const switcherBtn = document.getElementById('language-switcher');
        const dropdown    = document.getElementById('language-dropdown');

        switcherBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); dropdown?.classList.toggle('hidden'); });
        document.addEventListener('click', ()=> dropdown?.classList.add('hidden'));
        $all('#language-dropdown [data-lang]').forEach(btn=>{
          btn.addEventListener('click', (e)=>{
            e.stopPropagation();
            const lang = btn.getAttribute('data-lang');
            setLanguage(lang);
            dropdown?.classList.add('hidden');
          });
        });

        // First language application
        applyTranslations();

        // Initial renders (for home)
        renderArticlesList();

        // Filters
        document.getElementById('btn-apply-filters')?.addEventListener('click', ()=>{
          const s = document.getElementById('search-clinics').value;
          const t = document.getElementById('filter-type').value;
          const f = { search:s, type:t };
          renderClinicsOnMap(f); renderClinicsList(f);
        });
        document.getElementById('search-clinics')?.addEventListener('keypress', (e)=>{ if(e.key==='Enter') document.getElementById('btn-apply-filters').click(); });

        // Modal demo
        const addClinicModal = document.getElementById('add-clinic-modal');
        document.getElementById('btn-add-clinic')?.addEventListener('click', ()=>{ addClinicModal.classList.remove('hidden'); document.body.style.overflow='hidden'; });
        document.getElementById('close-add-clinic-modal')?.addEventListener('click', closeModal);
        document.getElementById('cancel-add-clinic')?.addEventListener('click', closeModal);
        function closeModal(){ addClinicModal.classList.add('hidden'); document.body.style.overflow=''; }
        document.getElementById('save-clinic')?.addEventListener('click', ()=>{
          alert('Demo: here you would save the clinic to a backend or localStorage.');
          closeModal();
        });
      });

      // Expose for debug
      window.MammoCareI18n = { get lang(){return currentLanguage;}, setLanguage };
    
        })();
  </script>

  <!-- PWA -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js");
    }
  </script>

</body>
</html>
